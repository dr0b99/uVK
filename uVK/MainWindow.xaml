<Window
    x:Class="uVK.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:uVK"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="uVK"
    Width="900"
    Height="600"
    MinWidth="{Binding WindowMinimumWidth}"
    MinHeight="{Binding WindowMinimumHeight}"
    Activated="AppWindow_Activated"
    AllowsTransparency="True"
    BorderThickness="0"
    Deactivated="AppWindow_Deactivated"
    Icon="Images/logo-small.png"
    TextElement.FontSize="13"
    TextElement.FontWeight="Regular"
    TextOptions.TextFormattingMode="Ideal"
    TextOptions.TextRenderingMode="Auto"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">

    <!--  Стиль окна  -->
    <Window.Resources>
        <Style TargetType="{x:Type local:MainWindow}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:MainWindow}">
                        <!--  Внешняя граница с полем тени  -->
                        <Border Padding="{Binding OuterMarginSizeThickness, FallbackValue=10}">

                            <!--  Контур MainWindow  -->
                            <Grid>

                                <!--  Маска непрозрачности для углов  -->
                                <Border x:Name="Container" Background="{StaticResource BackgroundLightBrush}" CornerRadius="{Binding WindowCornerRadius, FallbackValue=10}" />

                                <!--  Граница окна и тени  -->
                                <Border Background="{Binding ForegroundLightBrush, FallbackValue=#FFFFFF}" CornerRadius="{Binding WindowCornerRadius, FallbackValue=10}">
                                    <Border.Effect>
                                        <DropShadowEffect Opacity="0.2" ShadowDepth="0" />
                                    </Border.Effect>
                                </Border>

                                <!--  Содержимое MainWindow  -->
                                <Grid>

                                    <!--  Угловая обрезка  -->
                                    <Grid.OpacityMask>
                                        <VisualBrush Visual="{Binding ElementName=Container}" />
                                    </Grid.OpacityMask>

                                    <Grid.RowDefinitions>

                                        <!--  Строка заголовка  -->
                                        <RowDefinition Height="{Binding TitleHeightGridLength, FallbackValue=30}" />

                                        <!--  Содержимое окна  -->
                                        <RowDefinition Height="*" />

                                    </Grid.RowDefinitions>

                                    <!--  Строка заголовка  -->
                                    <Grid Grid.Column="0" Panel.ZIndex="1">

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <!--  Название  -->
                                            <ColumnDefinition Width="*" />
                                            <!--  Кнопки управления окном  -->
                                            <ColumnDefinition Width="Auto" />

                                        </Grid.ColumnDefinitions>

                                        <!--  Иконка  -->
                                        <Button Command="{Binding MenuCommand}" Style="{StaticResource SystemIconButton}">
                                            <Image Source="/Images/logo-small.png" />
                                        </Button>

                                        <Grid
                                            Grid.Column="0"
                                            Grid.ColumnSpan="3"
                                            Margin="0"
                                            HorizontalAlignment="Center">

                                            <Viewbox Grid.Column="0" Grid.ColumnSpan="3" Margin="5">
                                                <StackPanel>
                                                    <TextBlock
                                                        Margin="0,0,0,-5"
                                                        HorizontalAlignment="Center"
                                                        FontFamily="{StaticResource LatoBold}"
                                                        FontSize="{StaticResource FontSizeRegular}">
                                                        <Run Foreground="{StaticResource Dr0bOrangeBrush}" Text="u" /><Run Foreground="{StaticResource Dr0bBlueBrush}" Text="VK" />
                                                    </TextBlock>
                                                    <TextBlock Foreground="{StaticResource ForegroundDarkBrush}" Text="by Dr0b" TextAlignment="Center" />
                                                </StackPanel>
                                            </Viewbox>

                                        </Grid>

                                        <!--  Window Buttons  -->
                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                            <Button Command="{Binding MinimizeCommand}" Content="_" Style="{StaticResource WindowControlButton}" />
                                            <Button Command="{Binding MaximizeCommand}" Content="[ ]" Style="{StaticResource WindowControlButton}" />
                                            <Button Command="{Binding CloseCommand}" Content="X" Style="{StaticResource WindowCloseButton}" />
                                        </StackPanel>

                                    </Grid>

                                    <!--  Содержимое страницы  -->
                                    <Border Grid.Row="1" Padding="{Binding InnerContentPadding}">
                                        <ContentPresenter Content="{TemplateBinding Content}" />
                                    </Border>

                                </Grid>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="{Binding TitleHeight}"
            CornerRadius="0"
            GlassFrameThickness="0"
            ResizeBorderThickness="{Binding ResizeBorderThickness}" />
    </WindowChrome.WindowChrome>


    <Grid Margin="5,5,5,5">
        <Grid.RowDefinitions>
            <RowDefinition Height="75" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Title  -->
        <Grid>
            <Border Margin="5" Background="{Binding ForegroundLightBrush, FallbackValue=#FFFFFF}" CornerRadius="{Binding FallbackValue=5}">
                <Border.Effect>
                    <DropShadowEffect Opacity="0.3" ShadowDepth="0" />
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        Name="gridMain"
                        Grid.RowSpan="2"
                        Margin="5"
                        Background="#FFFFFF"
                        Visibility="Visible">
                        <StackPanel Orientation="Horizontal">

                            <Border Background="#58595b"
                                    CornerRadius="40" Margin="0,10" >
                                
                                <!--Кнопка "Пауза"-->
                                <ToggleButton
                                             Name="PauseButton"
                                             Width="35"
                                             Height="35"
                                             Foreground="#FFFFFF"
                                             Click="PauseButton_Click"
                                             Style="{StaticResource PlayPauseButtonStyle}">

                                    <ToggleButton.RenderTransform>
                                        <TranslateTransform />
                                    </ToggleButton.RenderTransform>

                                </ToggleButton>
                            </Border>

                            <!--Кнопка "Предыдущая аудиозапись"-->
                            <Button
                                Name="BackAudioButton"
                                Width="23"
                                Height="23"
                                Margin="0,0,0,0"
                                Foreground="{DynamicResource SidebarForegroundBrush}"
                                Style="{StaticResource PrevButtonStyle}">

                                <Button.RenderTransform>
                                    <TranslateTransform />
                                </Button.RenderTransform>

                            </Button>

                            <!--Кнопка "Следующая аудиозапись"-->
                            <Button
                                Name="NextAudioButton"
                                Width="23"
                                Height="23"
                                Margin="0,0,0,0"
                                Foreground="{DynamicResource SidebarForegroundBrush}"
                                Style="{StaticResource NextButtonStyle}">
                                <Button.RenderTransform>
                                    <TranslateTransform />
                                </Button.RenderTransform>

                            </Button>

                            <Border Margin="5 0 0 0" Background="#E9EDF1" CornerRadius="5">

                                <!--Картинка аудиозаписи-->
                                <Image
                                    Name="MusicImage"
                                    Margin="5"
                                    Source="/Images/logo.png"
                                    Stretch="UniformToFill" />

                            </Border>


                        </StackPanel>
                    </Grid>

                    <Grid Grid.Column="1" Margin="5">
                        <StackPanel>
                            <!--Текст "Название аудиозаписи"-->
                            <TextBlock
                                Name="MusicName"
                                MaxHeight="36"
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="{DynamicResource SidebarForegroundBrush}"
                                Text="Название"
                                TextTrimming="CharacterEllipsis" />

                            <!--  Исполнитель аудиозаписи  -->
                            <TextBlock
                                Name="MusicArtist"
                                Margin="0,0,0,0"
                                FontSize="13"
                                FontWeight="Normal"
                                Opacity="0.6"
                                Text="Исполнитель"
                                TextTrimming="CharacterEllipsis" />

                            <!--Полоса аудиозаписи-->
                            <Slider
                                Name="DurrationSlider"
                                Background="{DynamicResource SidebarSliderBackgroundBrush}"
                                IsMoveToPointEnabled="True"
                                Style="{StaticResource CommonSliderStyle}" />
                        </StackPanel>
                    </Grid>

                    <Grid Grid.Column="2" Margin="5">
                        <StackPanel VerticalAlignment="Center" Orientation="Horizontal">

                            <!--Кнопка "Громкость минимум"-->
                            <Button
                                Name="MinVolumeButton"
                                Width="14"
                                Margin="0,-4,10,0"
                                HorizontalAlignment="Center"
                                Opacity="0.5"
                                Template="{StaticResource MuteButton}" />

                            <!--  Качеля громкости  -->
                            <Slider
                                Name="VolumeSlider"
                                Width="80"
                                VerticalAlignment="Center"
                                Background="{DynamicResource SidebarSliderBackgroundBrush}"
                                IsMoveToPointEnabled="True"
                                Style="{StaticResource VolumeSliderStyle}" />

                            <!--  Громкость максимум  -->
                            <Button
                                Name="MaxVolumeButton"
                                Grid.Column="2"
                                Width="14"
                                Margin="10,-3,0,0"
                                HorizontalAlignment="Center"
                                Opacity="0.5"
                                Template="{StaticResource VolumeButton}" />

                            <!--Кнопка "Перемешать аудио"-->
                            <ToggleButton Name="RandomAudioButton" Margin="15 15 0 0" Width="32" Height="32"
                                          Style="{StaticResource ShuffleButtonStyle}" RenderTransformOrigin="0.5,0.5">
                                
                                <ToggleButton.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform/>
                                        <SkewTransform/>
                                        <RotateTransform Angle="90"/>
                                        <TranslateTransform/>
                                    </TransformGroup>
                                </ToggleButton.RenderTransform>



                            </ToggleButton>

                            <!--Кнопка "Повторять аудиозапись"-->
                            <ToggleButton Name="PovtorAudioButton" Margin="0 15 0 0 " Width="32" Height="32" Style="{StaticResource RepeatButtonStyle}">

                                <ToggleButton.RenderTransform>
                                    <TranslateTransform />
                                </ToggleButton.RenderTransform>

                            </ToggleButton>

                            <!--  Кнопка "выйти" (Пока не сделал её свойства)  -->
                            <ToggleButton
                                Name="ExitVK"
                                Width="32"
                                Height="32"
                                Margin="0,15,0,0"
                                Style="{StaticResource VkStatusButtonStyle}">

                                <ToggleButton.RenderTransform>
                                    <TranslateTransform />
                                </ToggleButton.RenderTransform>

                            </ToggleButton>

                        </StackPanel>
                    </Grid>

                </Grid>

            </Border>
        </Grid>


        <!-- PlayList-->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="0.4*" />
            </Grid.ColumnDefinitions>


            <Border Margin="5" Background="{Binding ForegroundLightBrush, FallbackValue=#FFFFFF}" CornerRadius="{Binding FallbackValue=5}">
                <Border.Effect>
                    <DropShadowEffect Opacity="0.3" ShadowDepth="0" />
                </Border.Effect>

                <Grid>
                    <!--Список аудиозаписей-->
                    <ListBox Name="MusicList" Margin="5" /> 
                </Grid>
            </Border>


            <Border
                Grid.Column="1"
                Margin="5"
                Background="{Binding ForegroundLightBrush, FallbackValue=#FFFFFF}"
                CornerRadius="{Binding FallbackValue=5}">
                <Border.Effect>
                    <DropShadowEffect Opacity="0.3" ShadowDepth="0" />
                </Border.Effect>

                <Grid>
                    <!--Список друзей-->
                    <ListBox Name="FrendList" Margin="5"  /> 
                </Grid>

            </Border>
        </Grid>




        <!--  Авторизация  -->
        <Grid
            Name="gridLogin"
            Grid.RowSpan="2"
            Background="#FFFFFF"
            Visibility="Hidden">

            <Border Padding="{Binding OuterMarginSizeThickness, FallbackValue=5}">
                <Grid Width="280" Height="250" HorizontalAlignment="Center">
                    <!--  Маска непрозрачности для углов  -->
                    <Border Background="{StaticResource BackgroundLightBrush}" CornerRadius="{Binding FallbackValue=10}" />
                    <!--  Граница окна и тени  -->
                    <Border Background="{Binding ForegroundLightBrush, FallbackValue=#FFFFFF}" CornerRadius="{Binding FallbackValue=10}">
                        <Grid>
                            <Viewbox Margin="10,10,10,190">
                                <StackPanel>
                                    <TextBlock Margin="0,0,0,0" HorizontalAlignment="Center" FontSize="{StaticResource FontSizeRegular}">
                                        <Run Foreground="{StaticResource Dr0bBlackBrush}" Text="Авторизация" />
                                    </TextBlock>
                                    <TextBlock
                                        Margin="0,10,0,0"
                                        HorizontalAlignment="Center"
                                        Foreground="{StaticResource ForegroundDarkBrush}"
                                        Text="Используйте аккаунт Вконтакте"
                                        TextAlignment="Center" />
                                </StackPanel>
                            </Viewbox>
                        </Grid>
                        <Border.Effect>
                            <DropShadowEffect Opacity="0.3" ShadowDepth="0" />
                        </Border.Effect>
                    </Border>
                </Grid>
            </Border>

            <PasswordBox
                Name="tbPassword"
                Width="254"
                Height="30"
                Margin="0,40,0,0"
                VerticalAlignment="Center"
                Tag="  Пароль" />

            <TextBox
                Name="tbLogin"
                Width="255"
                Height="30"
                Margin="0,-50,0,0"
                VerticalAlignment="Center"
                Tag="  Номер телефона или email" />

            <Button
                Name="btnLogin"
                Width="100"
                Height="37"
                Margin="0,150,155,0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="#FF6BA1FF"
                BorderBrush="#FF6BA1FF"
                Content="Войти"
                FontFamily="Segoe UI, Lucida Sans Unicode, Verdana"
                FontSize="13"
                FontWeight="Normal"
                Foreground="White" />

            <Button
                Margin="100,151,0,0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Content="Забыли пароль?"
                FontSize="13"
                Style="{StaticResource TextButton}" />

            <Label
                Margin="0,0,10,10"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="Project Dr0b 2019"
                Foreground="#7E8FA5" />

        </Grid>

    </Grid>

</Window>